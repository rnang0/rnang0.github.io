<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>春招复习3：设计模式 | rnang0 Blog</title><meta name="description" content="设计模式学习任务 单例 工厂 代理 策略 模板方法 观察者 装饰者 适配器 责任链 建造者  一、单例模式4.1 定义单例模式：确保一个类最多只有一个实例，并提供一个全局访问点。 即类的对象当且只有一个：例如缓存、线程池、Spring中的Bean对象 4.2 经典单例模式通常，普通类的构造函数是公有的，外部类可以通过“new 构造函数()”来生成多个实例。 所以实现单例模式，就要将类的构造函数设为"><meta name="keywords" content="设计模式"><meta name="author" content="rnang0"><meta name="copyright" content="rnang0"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="春招复习3：设计模式"><meta name="twitter:description" content="设计模式学习任务 单例 工厂 代理 策略 模板方法 观察者 装饰者 适配器 责任链 建造者  一、单例模式4.1 定义单例模式：确保一个类最多只有一个实例，并提供一个全局访问点。 即类的对象当且只有一个：例如缓存、线程池、Spring中的Bean对象 4.2 经典单例模式通常，普通类的构造函数是公有的，外部类可以通过“new 构造函数()”来生成多个实例。 所以实现单例模式，就要将类的构造函数设为"><meta name="twitter:image" content="https://img-blog.csdnimg.cn/2020062422122981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70"><meta property="og:type" content="article"><meta property="og:title" content="春招复习3：设计模式"><meta property="og:url" content="http://yoursite.com/2020/06/15/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A03%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><meta property="og:site_name" content="rnang0 Blog"><meta property="og:description" content="设计模式学习任务 单例 工厂 代理 策略 模板方法 观察者 装饰者 适配器 责任链 建造者  一、单例模式4.1 定义单例模式：确保一个类最多只有一个实例，并提供一个全局访问点。 即类的对象当且只有一个：例如缓存、线程池、Spring中的Bean对象 4.2 经典单例模式通常，普通类的构造函数是公有的，外部类可以通过“new 构造函数()”来生成多个实例。 所以实现单例模式，就要将类的构造函数设为"><meta property="og:image" content="https://img-blog.csdnimg.cn/2020062422122981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70"><meta property="article:published_time" content="2020-06-14T16:00:00.000Z"><meta property="article:modified_time" content="2020-06-29T03:37:20.344Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="canonical" href="http://yoursite.com/2020/06/15/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A03%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><link rel="prev" title="春招复习4：操作系统" href="http://yoursite.com/2020/06/23/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A04%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><link rel="next" title="春招复习2：Java集合类（下）" href="http://yoursite.com/2020/06/11/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A02%EF%BC%9AJava%E9%9B%86%E5%90%88%E7%B1%BB%EF%BC%88%E4%B8%8B%EF%BC%89/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'none',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/autor.JPG" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">61</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">84</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-mars"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#设计模式"><span class="toc-text">设计模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#学习任务"><span class="toc-text">学习任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#一、单例模式"><span class="toc-text">一、单例模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-定义"><span class="toc-text">4.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-经典单例模式"><span class="toc-text">4.2 经典单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-优化多线程问题"><span class="toc-text">4.3 优化多线程问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-线程同步"><span class="toc-text">1. 线程同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-“饿汉式”创建实例"><span class="toc-text">2. “饿汉式”创建实例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-双重检查加锁"><span class="toc-text">3. 双重检查加锁</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、工厂模式"><span class="toc-text">二、工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-定义"><span class="toc-text">2.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-OO原则的不足"><span class="toc-text">2.2 OO原则的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-工厂模式解决"><span class="toc-text">2.3 工厂模式解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-依赖抽象的原则"><span class="toc-text">2.4 依赖抽象的原则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、代理模式"><span class="toc-text">三、代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-定义"><span class="toc-text">3.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-JavaRMI"><span class="toc-text">3.2 JavaRMI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-通过RMI实现"><span class="toc-text">3.3 通过RMI实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-常见的代理模式"><span class="toc-text">3.4 常见的代理模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-动态代理"><span class="toc-text">3.4.1 动态代理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-代理模式和装饰者模式区别"><span class="toc-text">3.5 代理模式和装饰者模式区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、策略模式"><span class="toc-text">四、策略模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-定义-1"><span class="toc-text">4.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-OO原则的不足"><span class="toc-text">4.2 OO原则的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-策略模式解决"><span class="toc-text">4.3 策略模式解决</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、模板方法模式"><span class="toc-text">五、模板方法模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-定义"><span class="toc-text">5.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-模板方法解决"><span class="toc-text">5.2  模板方法解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-hook"><span class="toc-text">5.3 hook</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、观察者模式"><span class="toc-text">六、观察者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-定义"><span class="toc-text">6.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-OO原则的不足"><span class="toc-text">6.2 OO原则的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-观察者模式解决"><span class="toc-text">6.3 观察者模式解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-Java自带的观察者"><span class="toc-text">6.4 Java自带的观察者</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-Observable类"><span class="toc-text">1. Observable类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-Observer-接口"><span class="toc-text">2. Observer 接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、装饰者模式"><span class="toc-text">七、装饰者模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-定义"><span class="toc-text">7.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-OO原则的不足"><span class="toc-text">7.2 OO原则的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-装饰者模式解决"><span class="toc-text">7.3 装饰者模式解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-Java中的装饰者"><span class="toc-text">7.4 Java中的装饰者</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、适配器模式"><span class="toc-text">八、适配器模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-定义"><span class="toc-text">8.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-对象适配器和类适配器"><span class="toc-text">8.2 对象适配器和类适配器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1-对象适配器（更倾向于使用）"><span class="toc-text">8.2.1 对象适配器（更倾向于使用）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2-类适配器"><span class="toc-text">8.2.2 类适配器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-3-差异"><span class="toc-text">8.2.3 差异</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-Java中从枚举器到迭代器适配"><span class="toc-text">8.3 Java中从枚举器到迭代器适配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3-适配器模式优点"><span class="toc-text">8.3 适配器模式优点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九、责任链"><span class="toc-text">九、责任链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-定义"><span class="toc-text">9.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-OO设计的不足"><span class="toc-text">9.2 OO设计的不足</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-责任链模式解决"><span class="toc-text">9.3 责任链模式解决</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-优缺点"><span class="toc-text">9.4 优缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十、建造者"><span class="toc-text">十、建造者</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-定义"><span class="toc-text">10.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-建造者模式解决"><span class="toc-text">10.2 建造者模式解决</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#建造者创建复杂对象"><span class="toc-text">建造者创建复杂对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用户操作"><span class="toc-text">用户操作</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-省略指挥者和抽象生成器类"><span class="toc-text">10.3 省略指挥者和抽象生成器类</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://img-blog.csdnimg.cn/2020062422122981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">rnang0 Blog</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-mars"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">春招复习3：设计模式</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-06-15 00:00:00"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-06-15</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-29 11:37:20"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-29</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A0/">春招复习</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="学习任务"><a href="#学习任务" class="headerlink" title="学习任务"></a>学习任务</h2><ul>
<li>单例</li>
<li>工厂</li>
<li>代理</li>
<li>策略</li>
<li>模板方法</li>
<li>观察者</li>
<li>装饰者</li>
<li>适配器</li>
<li>责任链</li>
<li>建造者</li>
</ul>
<h2 id="一、单例模式"><a href="#一、单例模式" class="headerlink" title="一、单例模式"></a>一、单例模式</h2><h3 id="4-1-定义"><a href="#4-1-定义" class="headerlink" title="4.1 定义"></a>4.1 定义</h3><p><strong>单例模式：</strong>确保一个类最多只有一个实例，并提供一个全局访问点。</p>
<p>即类的对象当且只有一个：例如缓存、线程池、Spring中的Bean对象</p>
<h3 id="4-2-经典单例模式"><a href="#4-2-经典单例模式" class="headerlink" title="4.2 经典单例模式"></a>4.2 经典单例模式</h3><p>通常，普通类的构造函数是公有的，外部类可以通过“new 构造函数()”来生成多个实例。</p>
<p>所以实现单例模式，就要<strong>将类的构造函数设为私有的，外部类就无法调用该构造函数，也就无法生成多个实例</strong>。这时该类<strong>自身必须定义一个静态私有实例</strong>，并向外提供一个静态的公有函数用于创建或获取该静态私有实例。</p>
<p><img src="http://c.biancheng.net/uploads/allimg/181113/3-1Q1131K441K2.gif" alt="单例模式的结构图"></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//通过添加static，来实现将Singleton作为一个类对象来创建 即外部可以Singleton.getInstance()</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqeInstance=<span class="keyword">null</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//构造函数设置为 私有的</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">		</span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(uniqeInstance==<span class="keyword">null</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			uniqeInstance=<span class="keyword">new</span> Singleton();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> uniqeInstance;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-优化多线程问题"><a href="#4-3-优化多线程问题" class="headerlink" title="4.3 优化多线程问题"></a>4.3 优化多线程问题</h3><p>当出现多线程问题时，原先的经典单例模式就不再适用。</p>
<p>当两个线程同时操作一个单例对象时，即同时创建uniqeInstance时。若其中一个线程，时间片只能让他执行到if(uniqeInstance==null)，然后切换下个线程执行完<code>getInstance()</code>，所以两个线程就获得了两个对象，单例模式就失效了。</p>
<p>解决方法：</p>
<h4 id="1-线程同步"><a href="#1-线程同步" class="headerlink" title="1. 线程同步"></a>1. 线程同步</h4><p>最简单方式，加个synchronized关键字</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span></span><br></pre></td></tr></table></figure>

<p>但是如若<code>getInstance()</code>经常调用，则消耗资源增加，效率降低。</p>
<h4 id="2-“饿汉式”创建实例"><a href="#2-“饿汉式”创建实例" class="headerlink" title="2. “饿汉式”创建实例"></a>2. “饿汉式”创建实例</h4><p>直接<strong>在类创建时实例化私有变量</strong>uniqeInstance</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqeInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> uniqeInstance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是还是存在浪费内存资源的可能，即本次执行可能不需要单例对象但它还是实例化出来了。</p>
<h4 id="3-双重检查加锁"><a href="#3-双重检查加锁" class="headerlink" title="3. 双重检查加锁"></a>3. 双重检查加锁</h4><p>频繁的调用<code>getInstance()</code>，它也不会每次都进入同步区域。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqeInstance;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 不会频繁的进入线程同步区域</span></span><br><span class="line">        <span class="keyword">if</span> (uniqeInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (uniqeInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    uniqeInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> uniqeInstance;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="二、工厂模式"><a href="#二、工厂模式" class="headerlink" title="二、工厂模式"></a>二、工厂模式</h2><h3 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h3><p>工厂模式一般分为三种：简单工厂模式、工厂方法模式、抽象工厂模式</p>
<p>（1）简单工厂模式：定义了一个创建对象的类，由这个类来封装实例化对象的行为。</p>
<p>（2）工厂方法模式：定义了一个创建对象的抽象方法，由子类决定要实例化的类。工厂方法模式将对象的实例化推迟到子类。</p>
<p>（3）<strong>抽象工厂模式（重点）：定义了一个接口用于创建相关或有依赖关系的对象族，而无需明确指定具体类。</strong></p>
<h3 id="2-2-OO原则的不足"><a href="#2-2-OO原则的不足" class="headerlink" title="2.2 OO原则的不足"></a>2.2 OO原则的不足</h3><p>我们以卖不同种类的披萨为例，来说明：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//披萨是个抽象类，后面根据顾客选用的种类，来进行实例化</span></span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">		String ordertype;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			ordertype = gettype();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span> (ordertype.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">                <span class="comment">//进行实例化</span></span><br><span class="line">				pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">                <span class="comment">//进行实例化</span></span><br><span class="line">				pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">                <span class="comment">//....</span></span><br><span class="line">				pizza = <span class="keyword">new</span> PepperPizza();</span><br><span class="line">			&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"chinese"</span>)) &#123;</span><br><span class="line">				pizza = <span class="keyword">new</span> ChinesePizza();</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			pizza.prepare();</span><br><span class="line">			pizza.bake();</span><br><span class="line">			pizza.cut();</span><br><span class="line">			pizza.box();</span><br><span class="line">		&#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> String <span class="title">gettype</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			BufferedReader strin = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(</span><br><span class="line">					System.in));</span><br><span class="line">			System.out.println(<span class="string">"input pizza type:"</span>);</span><br><span class="line">			String str = strin.readLine();</span><br><span class="line"></span><br><span class="line">			<span class="keyword">return</span> str;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			<span class="keyword">return</span> <span class="string">""</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里就出现了问题，<strong>new不同种类的披萨（对象的实例化）对项目扩展有影响，主项目过程需要拓展披萨种类时，就必须要重新编译、加载、部署。</strong></p>
<h3 id="2-3-工厂模式解决"><a href="#2-3-工厂模式解决" class="headerlink" title="2.3 工厂模式解决"></a>2.3 工厂模式解决</h3><p>根据上述原因，主项目过程需要拓展披萨种类时，我们把对象实例化滴代码抽取处理，用工厂来实现。</p>
<ul>
<li>简单工厂模式实现</li>
</ul>
<p>设计方案：定义一个实例化披萨对象的类，封装创建对象的代码</p>
<p><code>pizza = mSimplePizzaFactory.CreatePizza(ordertype);</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line">	SimplePizzaFactory mSimplePizzaFactory;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">(SimplePizzaFactory mSimplePizzaFactory)</span> </span>&#123;</span><br><span class="line">		setFactory(mSimplePizzaFactory);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFactory</span><span class="params">(SimplePizzaFactory mSimplePizzaFactory)</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">		String ordertype;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">this</span>.mSimplePizzaFactory = mSimplePizzaFactory;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			ordertype = gettype();</span><br><span class="line">			pizza = mSimplePizzaFactory.CreatePizza(ordertype);</span><br><span class="line">			<span class="keyword">if</span> (pizza != <span class="keyword">null</span>) &#123;</span><br><span class="line">				pizza.prepare();</span><br><span class="line">				pizza.bake();</span><br><span class="line">				pizza.cut();</span><br><span class="line">				pizza.box();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimplePizzaFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">CreatePizza</span><span class="params">(String ordertype)</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (ordertype.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> CheesePizza();</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"greek"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> GreekPizza();</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> PepperPizza();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>工厂方法模式实现</li>
</ul>
<p>现在需求进行变更，需要讲刚才的工厂进行拓展（开分店），所以原先一个工厂就变得不够用了，所以根据我们的设计原则，工厂在变所以将工厂抽象或者封装成接口处理。</p>
<p>设计方案：将披萨项目里的披萨对象实例化功能抽象成抽象的方法，在不同的工厂进行具体实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">		String ordertype;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			ordertype = gettype();</span><br><span class="line">			pizza = createPizza(ordertype);</span><br><span class="line"></span><br><span class="line">			pizza.prepare();</span><br><span class="line">			pizza.bake();</span><br><span class="line">			pizza.cut();</span><br><span class="line">			pizza.box();</span><br><span class="line">		&#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">abstract</span> Pizza <span class="title">createPizza</span><span class="params">(String ordertype)</span></span>;</span><br><span class="line">    </span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/***********************************具体实现***********************************/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NYOrderPizza</span> <span class="keyword">extends</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//只需重写这个变化的createPizza方法。</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function">Pizza <span class="title">createPizza</span><span class="params">(String ordertype)</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (ordertype.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> NYCheesePizza();</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> NYPepperPizza();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用时，就直接调用 具体工厂（分店）的来实现。</p>
<p><code>OrderPizza mOrderPizza = new NYOrderPizza();</code></p>
<ul>
<li>抽象工厂模式实现（主要）</li>
</ul>
<p>根据我们的设计原则，工厂在变所以将工厂抽象或者封装成接口处理，用接口实现更加的减少了耦合性，也是我们的首选。</p>
<p>一个抽象工厂：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AbsFactory</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">CreatePizza</span><span class="params">(String ordertype)</span> </span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在主项目里，用接口来实现多态：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderPizza</span> </span>&#123;</span><br><span class="line">	AbsFactory mFactory;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">OrderPizza</span><span class="params">(AbsFactory mFactory)</span> </span>&#123;</span><br><span class="line">		setFactory(mFactory);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFactory</span><span class="params">(AbsFactory mFactory)</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line">		String ordertype;</span><br><span class="line">		<span class="keyword">this</span>.mFactory = mFactory;</span><br><span class="line">		<span class="keyword">do</span> &#123;</span><br><span class="line">			ordertype = gettype();</span><br><span class="line">			pizza = mFactory.CreatePizza(ordertype);</span><br><span class="line">			<span class="keyword">if</span> (pizza != <span class="keyword">null</span>) &#123;</span><br><span class="line">				pizza.prepare();</span><br><span class="line">				pizza.bake();</span><br><span class="line">				pizza.cut();</span><br><span class="line">				pizza.box();</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">while</span> (<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	......</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*********************************具体接口实现*********************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LDFactory</span> <span class="keyword">implements</span> <span class="title">AbsFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Pizza <span class="title">CreatePizza</span><span class="params">(String ordertype)</span> </span>&#123;</span><br><span class="line">		Pizza pizza = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (ordertype.equals(<span class="string">"cheese"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> LDCheesePizza();</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">"pepper"</span>)) &#123;</span><br><span class="line">			pizza = <span class="keyword">new</span> LDPepperPizza();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> pizza;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以调用时，就直接将具体工厂传入主项目。</p>
<p><code>OrderPizza mOrderPizza = new OrderPizza(new LDFactory());</code></p>
<h3 id="2-4-依赖抽象的原则"><a href="#2-4-依赖抽象的原则" class="headerlink" title="2.4 依赖抽象的原则"></a>2.4 依赖抽象的原则</h3><p>我们说明依赖抽象的原则：</p>
<ul>
<li>变量不要持有具体类的引用</li>
<li>不要让类继承自具体类，要<strong>继承抽象类或接口（接口最好，程序清晰，代码复用降低）</strong></li>
<li>不要覆盖基类中已实现的方法（一般为通用的方法才进行实现）</li>
</ul>
<h2 id="三、代理模式"><a href="#三、代理模式" class="headerlink" title="三、代理模式"></a>三、代理模式</h2><h3 id="3-1-定义"><a href="#3-1-定义" class="headerlink" title="3.1 定义"></a>3.1 定义</h3><p><strong>代理模式：为一个对象提供一个替身，以控制对这个对象的访问。</strong></p>
<p>被代理的对象可以是远程对象、创建开销大的对象或需要<strong>安全控制</strong>的对象，以及<strong>最重要滴就是代理加强。</strong></p>
<p>代理模式有很多变体，都是为了控制与管理对象访问。</p>
<h3 id="3-2-JavaRMI"><a href="#3-2-JavaRMI" class="headerlink" title="3.2 JavaRMI"></a>3.2 JavaRMI</h3><p>RMI：<code>远程方法调用</code>是<strong>计算机之间通过网络实现</strong>对象调用的一种<strong>通讯机制</strong>。</p>
<p>一台计算机上的对象可以调用另外 一台计算机上的对象来获取远程数据。</p>
<ul>
<li>过去是用TCP/IP来进行远程通讯的主要手段，socket编程来开发。</li>
<li>现在的RPC（远程过程调用）面对复杂的信息传讯时还不太行，每次都去使用底层就不太行。</li>
<li>RMI被设计成一种面向对象开发方式，允许程序员使用远程对象来实现通信（底层已经封装好）。</li>
</ul>
<h3 id="3-3-通过RMI实现"><a href="#3-3-通过RMI实现" class="headerlink" title="3.3 通过RMI实现"></a>3.3 通过RMI实现</h3><p>示例项目类图结构：</p>
<p><img src="https://img-blog.csdnimg.cn/20200622095807726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<p>远程接口和糖果机、以及注册服务</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 远端的接口文件（糖果机），里面是想实现的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CandyMachineRemote</span> <span class="keyword">extends</span> <span class="title">Remote</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String  <span class="title">getLocation</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException</span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException</span>;</span><br><span class="line">    <span class="comment">// State是一个自定义对象，所以要进行序列化（网络传输时是通过序列化成二进制文件进行序列化）</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> State <span class="title">getstate</span><span class="params">()</span> <span class="keyword">throws</span> RemoteException</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 远程糖果机实现</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CandyMachine</span> <span class="keyword">extends</span> <span class="title">UnicastRemoteObject</span> <span class="keyword">implements</span> <span class="title">CandyMachineRemote</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	State mSoldOutState;</span><br><span class="line">	State mOnReadyState;</span><br><span class="line">	State mHasCoin;</span><br><span class="line">	State mSoldState;</span><br><span class="line">	State mWinnerState;</span><br><span class="line">	<span class="keyword">private</span> String location=<span class="string">""</span>;</span><br><span class="line">	<span class="keyword">private</span> State state;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">CandyMachine</span><span class="params">(String location,<span class="keyword">int</span> count)</span> <span class="keyword">throws</span> RemoteException</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.location=location;</span><br><span class="line">		<span class="keyword">this</span>.count = count;</span><br><span class="line">		mSoldOutState = <span class="keyword">new</span> SoldOutState(<span class="keyword">this</span>);</span><br><span class="line">		mOnReadyState = <span class="keyword">new</span> OnReadyState(<span class="keyword">this</span>);</span><br><span class="line">		mHasCoin = <span class="keyword">new</span> HasCoin(<span class="keyword">this</span>);</span><br><span class="line">		mSoldState = <span class="keyword">new</span> SoldState(<span class="keyword">this</span>);</span><br><span class="line">		mWinnerState = <span class="keyword">new</span> WinnerState(<span class="keyword">this</span>);</span><br><span class="line">		<span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			state = mOnReadyState;</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			state = mSoldOutState;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">// get、set方法</span></span><br><span class="line">    <span class="comment">// 。。。。。。</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insertCoin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		state.insertCoin();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">returnCoin</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		state.returnCoin();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">turnCrank</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		state.turnCrank();</span><br><span class="line">		state.dispense();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">releaseCandy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">if</span> (count &gt; <span class="number">0</span>) &#123;</span><br><span class="line">			count = count - <span class="number">1</span>;</span><br><span class="line">			System.out.println(<span class="string">"a candy rolling out!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printstate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		state.printstate();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//远程注册服务</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RemoteMainTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			CandyMachine service = <span class="keyword">new</span> CandyMachine(<span class="string">"test1"</span>, <span class="number">7</span>);</span><br><span class="line">			<span class="comment">// LocateRegistry.createRegistry(6602);</span></span><br><span class="line">            <span class="comment">// 注册服务</span></span><br><span class="line">			Naming.rebind(<span class="string">"rmi://127.0.0.1:6602/test1"</span>, service);</span><br><span class="line">			service.insertCoin();</span><br><span class="line">			service = <span class="keyword">new</span> CandyMachine(<span class="string">"test2"</span>, <span class="number">5</span>);</span><br><span class="line">            <span class="comment">// 注册服务</span></span><br><span class="line">			Naming.rebind(<span class="string">"rmi://127.0.0.1:6602/test2"</span>, service);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">			System.out.println(e.toString());</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本地调用</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Monitor</span> </span>&#123;</span><br><span class="line">	<span class="comment">// 里面是 代理糖果机</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;CandyMachineRemote&gt; candyMachinelst;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Monitor</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		candyMachinelst = <span class="keyword">new</span> ArrayList&lt;CandyMachineRemote&gt;();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addMachine</span><span class="params">(CandyMachineRemote mCandyMachine)</span> </span>&#123;</span><br><span class="line">		candyMachinelst.add(mCandyMachine);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">report</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		CandyMachineRemote mCandyMachine;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = candyMachinelst.size(); i &lt; len; i++) &#123;</span><br><span class="line">			mCandyMachine = candyMachinelst.get(i);</span><br><span class="line">            <span class="comment">// 调用糖果机接口</span></span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				System.out</span><br><span class="line">						.println(<span class="string">"Machine Loc:"</span> + mCandyMachine.getLocation());</span><br><span class="line"></span><br><span class="line">				System.out.println(<span class="string">"Machine Candy count:"</span></span><br><span class="line">						+ mCandyMachine.getCount());</span><br><span class="line">				System.out.println(<span class="string">"Machine State:"</span></span><br><span class="line">						+ mCandyMachine.getstate().getstatename());</span><br><span class="line">			&#125; <span class="keyword">catch</span> (RemoteException e) &#123;</span><br><span class="line">				<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Monitor mMonitor = <span class="keyword">new</span> Monitor();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// RMI服务进行查找</span></span><br><span class="line">			CandyMachineRemote mCandyMachine = (CandyMachineRemote) Naming</span><br><span class="line">					.lookup(<span class="string">"rmi://127.0.0.1:6602/test1"</span>);</span><br><span class="line">            <span class="comment">// 加入远程服务</span></span><br><span class="line">			mMonitor.addMachine(mCandyMachine);</span><br><span class="line">            </span><br><span class="line">			mCandyMachine = (CandyMachineRemote) Naming</span><br><span class="line">					.lookup(<span class="string">"rmi://127.0.0.1:6602/test2"</span>);</span><br><span class="line">			mMonitor.addMachine(mCandyMachine);</span><br><span class="line">            </span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		mMonitor.report();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结：Monitor 就像调用本地方法一样，直接调用report()来进行操作。而实际是操作的被代理对象，底层是进行远程调用滴。</p>
<h3 id="3-4-常见的代理模式"><a href="#3-4-常见的代理模式" class="headerlink" title="3.4 常见的代理模式"></a>3.4 常见的代理模式</h3><p>常见的代理模式主要为：虚拟代理、<strong>动态代理、保护代理</strong>、变体。。。我们重点看<strong>动态代理。</strong></p>
<p>虚拟代理：为创建开销大的对象提供代理服务，真正对象创建前后进行展示。</p>
<h4 id="3-4-1-动态代理"><a href="#3-4-1-动态代理" class="headerlink" title="3.4.1 动态代理"></a>3.4.1 动态代理</h4><p><strong>动态代理：运行时动态的创建代理类对象，并将方法调用转发到指定类。</strong>如 <a href="http://c.biancheng.net/spring/" target="_blank" rel="noopener">Spring</a>AOP</p>
<p><img src="https://img-blog.csdnimg.cn/20200622102836687.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<p><strong>实际的对象RealSubject里面有req（）方法，在用户访问前用动态代理进行控制，管理。通过Proxy和InvocationHandler来控制管理这个实际对象。</strong></p>
<h3 id="3-5-代理模式和装饰者模式区别"><a href="#3-5-代理模式和装饰者模式区别" class="headerlink" title="3.5 代理模式和装饰者模式区别"></a>3.5 代理模式和装饰者模式区别</h3><ul>
<li>装饰者模式，装饰以后<strong>会添加新功能</strong></li>
<li>代理模式目的是<strong>对目标对象访问的控制和管理</strong></li>
</ul>
<h2 id="四、策略模式"><a href="#四、策略模式" class="headerlink" title="四、策略模式"></a>四、策略模式</h2><h3 id="4-1-定义-1"><a href="#4-1-定义-1" class="headerlink" title="4.1 定义"></a>4.1 定义</h3><p><strong>策略模式</strong>：分别封装行为接口，实现算法族，超类里放行为接口对象，在子类里具体设定行为对象。</p>
<p>设计原则就是：分离变化部分，封装接口，<strong>基于接口编程各种功能</strong>。此模式让行为算法的变化独立于算法的使用者。</p>
<h3 id="4-2-OO原则的不足"><a href="#4-2-OO原则的不足" class="headerlink" title="4.2 OO原则的不足"></a>4.2 OO原则的不足</h3><p><strong>继承的问题：对类的局部改动，尤其超类的局部改动，会影响其他部分。影响会有溢出效应</strong></p>
<p>如果又要新增需求，使用OO原则（继承实现），只能是每个子类都需要填坑（不变化的都要复写），增加了工作量。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//超类挖的一个坑，每个子类都要来填，增加工作量，复杂度O(N^2)。不是好的设计方式</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StoneDuck</span> <span class="keyword">extends</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line">....	&#125;；</span><br></pre></td></tr></table></figure>

<h3 id="4-3-策略模式解决"><a href="#4-3-策略模式解决" class="headerlink" title="4.3 策略模式解决"></a>4.3 策略模式解决</h3><p>需要新的设计方式，应对项目的扩展性，降低复杂度。分析项目变化与不变部分，<strong>提取变化部分，抽象成接口+实现；</strong>不变的部分，写在抽象类（父类）中，即可。</p>
<p>好处：新增行为简单，行为类更好的复用，组合更方便。既有继承带来的复用好处，没有挖坑</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">接口：</span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">FlyBehavior</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span></span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BadFlyBehavior</span> <span class="keyword">implements</span> <span class="title">FlyBehavior</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            System.out.println(<span class="string">"--BadFly--"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodFlyBehavior</span> <span class="keyword">implements</span> <span class="title">FlyBehavior</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            System.out.println(<span class="string">"--GoodFly--"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">/*************************************************************************************************/</span></span><br><span class="line">	<span class="comment">//“叫”接口同理	</span></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">QuackBehavior</span> </span>&#123;</span><br><span class="line">		<span class="function"><span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BadQuackBehavior</span> <span class="keyword">implements</span> <span class="title">QuackBehavior</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            System.out.println(<span class="string">"--BadQuack--"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodQuackBehavior</span> <span class="keyword">implements</span> <span class="title">QuackBehavior</span> </span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            System.out.println(<span class="string">"--GoodQuack--"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>在外面调用中</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreenHeadDuck</span> <span class="keyword">extends</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">GreenHeadDuck</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		mFlyBehavior = <span class="keyword">new</span> GoodFlyBehavior();</span><br><span class="line">		mQuackBehavior = <span class="keyword">new</span> BadQuackBehavior();</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="comment">//display方法就是不变的，所以不需要进行抽象成接口</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="五、模板方法模式"><a href="#五、模板方法模式" class="headerlink" title="五、模板方法模式"></a>五、模板方法模式</h2><h3 id="5-1-定义"><a href="#5-1-定义" class="headerlink" title="5.1 定义"></a>5.1 定义</h3><p><strong>模板方法模式：封装了一个算法步骤，并允许子类为一个或多个步骤方法提供实现。</strong></p>
<p>模板方法可以使子类在不改变算法结构的情况下，重新定义算法结构中的某个步骤。</p>
<p>例如：冲咖啡和冲茶 具有类似的功能，就可以构建出模板。</p>
<p>在Java开发中常见的模仿方法模式：</p>
<ul>
<li>框架的实现实际就是通过模板实现，根据我们的需求自定义框架</li>
<li>排序算法中Comparable比较模板</li>
</ul>
<h3 id="5-2-模板方法解决"><a href="#5-2-模板方法解决" class="headerlink" title="5.2  模板方法解决"></a>5.2  模板方法解决</h3><p><img src="https://pics1.baidu.com/feed/0b55b319ebc4b7457109fe1b24767a128b8215a9.jpeg?token=0bbc1fd693e9a52459245d4107679636&s=0AAA7A239BFFD9EB1CFDA1DE010080B1" alt="img"></p>
<p><code>注意</code>: 超类中的<strong>模板方法（ templateMethod）</strong>以及<strong>不变的方法（boilWater、pourInCup）</strong>都添加了final关键字。</p>
<p>我们知道<strong>final关键字是不允许子类修改</strong>的，所以这些固定不变的方法和模板就需要<strong>使用final</strong>来进行固定。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//超类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HotDrink</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">templateMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        addCondiments();</span><br><span class="line">        send();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">boilWater</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"一.烧水"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">pourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"三.倒入杯中"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-3-hook"><a href="#5-3-hook" class="headerlink" title="5.3 hook"></a>5.3 hook</h3><p>hook：钩子。可以选的子类可以覆盖父类的方法，即<strong>可选择实现或者不实现</strong>的方法。</p>
<p>比如，现在有了新需求，客户可以自己选择需不需要添加调料。这个怎么做呢？</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//超类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">HotDrink</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">templateMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        boilWater();</span><br><span class="line">        brew();</span><br><span class="line">        pourInCup();</span><br><span class="line">        <span class="keyword">if</span> (wantCondimentsHook()) &#123;</span><br><span class="line">            addCondiments();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"我不加调料！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        send();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> boolan <span class="title">wantCondimentsHook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 默认是要的</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;    </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">boilWater</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"一.烧水"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">pourInCup</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"三.倒入杯中"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br><span class="line"><span class="comment">/******************************带hook的子类**************************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TeaWithHook</span> <span class="title">extend</span> <span class="title">HotDrink</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCondiments</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(<span class="string">"加柠檬"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">brew</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">        System.out.println(<span class="string">"泡茶"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> boolan <span class="title">wantCondimentsHook</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 判断是否加调料，然后来设置返回值</span></span><br><span class="line">    &#125;      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="六、观察者模式"><a href="#六、观察者模式" class="headerlink" title="六、观察者模式"></a>六、观察者模式</h2><h3 id="6-1-定义"><a href="#6-1-定义" class="headerlink" title="6.1 定义"></a>6.1 定义</h3><p><strong>观察者模式（订阅——发布模式）： 对象之间多对一依赖的一种设计方案，被依赖的对象为Subject，依赖的对象为Observer，Subject通知Observer变化。</strong></p>
<h3 id="6-2-OO原则的不足"><a href="#6-2-OO原则的不足" class="headerlink" title="6.2 OO原则的不足"></a>6.2 OO原则的不足</h3><p>我们能够想到的就是通过这种传统的耦合方式，来实现通知。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*******************************************目标****************************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherData</span> </span>&#123;</span><br><span class="line">	<span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//get/set方法</span></span><br><span class="line">    </span><br><span class="line">	<span class="keyword">private</span> CurrentConditions mCurrentConditions; <span class="comment">//观察者</span></span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">WeatherData</span><span class="params">(CurrentConditions mCurrentConditions)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>. mCurrentConditions= mCurrentConditions;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dataChange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		mCurrentConditions.update(getTemperature(), getPressure(), getHumidity());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(<span class="keyword">float</span> mTemperature,<span class="keyword">float</span> mPressure,<span class="keyword">float</span> mHumidity)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mTemperatrue=mTemperature;</span><br><span class="line">		<span class="keyword">this</span>.mPressure=mPressure;</span><br><span class="line">		<span class="keyword">this</span>.mHumidity=mHumidity;</span><br><span class="line">		dataChange();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************观察者****************************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditions</span> </span>&#123;</span><br><span class="line">	<span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//get/set方法</span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> mTemperature,<span class="keyword">float</span> mPressure,<span class="keyword">float</span> mHumidity)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mTemperature=mTemperature;</span><br><span class="line">		<span class="keyword">this</span>.mPressure=mPressure;</span><br><span class="line">		<span class="keyword">this</span>.mHumidity=mHumidity;</span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"***Today mTemperature: "</span>+mTemperature+<span class="string">"***"</span>);</span><br><span class="line">		System.out.println(<span class="string">"***Today mPressure: "</span>+mPressure+<span class="string">"***"</span>);</span><br><span class="line">		System.out.println(<span class="string">"***Today mHumidity: "</span>+mHumidity+<span class="string">"***"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到这样做的话，<strong>目标与观察者之间的耦合性极高</strong>，并且最重要一点：<strong>当进行更新时，由于目标中有观察者类，所以程序会进行反复的编译。</strong></p>
<h3 id="6-3-观察者模式解决"><a href="#6-3-观察者模式解决" class="headerlink" title="6.3 观察者模式解决"></a>6.3 观察者模式解决</h3><p>首先还是根据我们分析项目的原则，分析变化与不变部分，<strong>提取变化部分，抽象成接口+实现；</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//目标</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//观察者</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> mTemperatrue,<span class="keyword">float</span> mPressure,<span class="keyword">float</span> mHumidity)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>来进一步的实现</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*******************************************目标实现类****************************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WeatherDataSt</span> <span class="keyword">implements</span> <span class="title">Subject</span></span>&#123;</span><br><span class="line">	<span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//get/set方法</span></span><br><span class="line">	</span><br><span class="line">    <span class="comment">/* 使用数组集合来进行存储观察者 降低了耦合度*/</span></span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;Observer&gt; mObservers;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">WeatherDataSt</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		mObservers=<span class="keyword">new</span> ArrayList&lt;Observer&gt;();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dataChange</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		notifyObservers();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setData</span><span class="params">(<span class="keyword">float</span> mTemperatrue,<span class="keyword">float</span> mPressure,<span class="keyword">float</span> mHumidity)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mTemperatrue=mTemperatrue;</span><br><span class="line">		<span class="keyword">this</span>.mPressure=mPressure;</span><br><span class="line">		<span class="keyword">this</span>.mHumidity=mHumidity;</span><br><span class="line">		dataChange();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerObserver</span><span class="params">(Observer o)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		mObservers.add(o);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">removeObserver</span><span class="params">(Observer o)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">if</span>(mObservers.contains(o))</span><br><span class="line">		&#123;mObservers.remove(o);&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">notifyObservers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>,len=mObservers.size();i&lt;len;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			mObservers.get(i).update(getTemperature(), getPressure(), getHumidity());</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************观察者实现类****************************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CurrentConditions</span> <span class="keyword">implements</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">	<span class="comment">//属性</span></span><br><span class="line">    <span class="comment">//get/set方法</span></span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">float</span> mTemperatrue, <span class="keyword">float</span> mPressure, <span class="keyword">float</span> mHumidity)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.mHumidity = mHumidity;</span><br><span class="line">		<span class="keyword">this</span>.mPressure = mPressure;</span><br><span class="line">		<span class="keyword">this</span>.mTemperatrue = mTemperatrue;</span><br><span class="line">		display();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"***Today mTemperatrue:"</span> + mTemperatrue + <span class="string">"***"</span>);</span><br><span class="line">		System.out.println(<span class="string">"***Today mPressure:"</span> + mPressure + <span class="string">"***"</span>);</span><br><span class="line">		System.out.println(<span class="string">"***Today mHumidity:"</span> + mHumidity + <span class="string">"***"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>观察者模式是一种对象行为型模式，其主要优点如下。</p>
<ul>
<li>降低了目标与观察者之间的耦合关系，实现了<strong>松耦合、高内聚</strong>，两者之间是<strong>抽象耦合关系</strong>。</li>
<li>目标与观察者之间建立了一套触发机制。</li>
</ul>
<p>应用场景：</p>
<ul>
<li>对象间存在一对多的关系，一个对象状态改变会影响其他对象。</li>
<li>当一个模型有两方面，其中一个方面依赖于另一方面时，可将这二者封装在独立的对象中以使它们可以各自独立地改变和复用。</li>
<li>例如前面学习Spring Cloud微服务中的，注册中心Eureka就是通过这种观察者模式实现，还有就是MQ中也有该模式（订阅——发布）。</li>
</ul>
<h3 id="6-4-Java自带的观察者"><a href="#6-4-Java自带的观察者" class="headerlink" title="6.4 Java自带的观察者"></a>6.4 Java自带的观察者</h3><h4 id="1-Observable类"><a href="#1-Observable类" class="headerlink" title="1. Observable类"></a>1. Observable类</h4><p>Observable <strong>类</strong>是抽象目标类，它有一个 Vector 向量，用于保存所有要通知的观察者对象，下面来介绍它最重要的3个方法。</p>
<ol>
<li>void addObserver(Observer o) 方法：用于将新的观察者对象添加到向量中。</li>
<li>void notifyObservers(Object arg) 方法：调用向量中的<strong>所有观察者对象的 update</strong>。方法，通知它们数据发生改变。<strong>通常越晚加入向量的观察者越先得到通知。</strong></li>
<li>void setChange() 方法：用来设置一个 boolean 类型的内部标志位，注明目标对象发生了变化。当它为真时，notifyObservers() 才会通知观察者。</li>
</ol>
<h4 id="2-Observer-接口"><a href="#2-Observer-接口" class="headerlink" title="2. Observer 接口"></a>2. Observer 接口</h4><p>Observer <strong>接口</strong>是抽象观察者，它监视目标对象的变化，当目标对象发生变化时，通知观察者得，并调用 void update(Observable o,Object arg) 方法，进行相应的工作。</p>
<h2 id="七、装饰者模式"><a href="#七、装饰者模式" class="headerlink" title="七、装饰者模式"></a>七、装饰者模式</h2><h3 id="7-1-定义"><a href="#7-1-定义" class="headerlink" title="7.1 定义"></a>7.1 定义</h3><p><strong>装饰者模式： 动态的将新功能附加到对象上。在对象功能扩展方面，它比继承更有弹性。</strong></p>
<h3 id="7-2-OO原则的不足"><a href="#7-2-OO原则的不足" class="headerlink" title="7.2 OO原则的不足"></a>7.2 OO原则的不足</h3><p>我们以咖啡馆订单为例进行演示：咖啡馆有不同的咖啡种类、不同的调料。</p>
<p>直观的想法，肯定是设计一个超类，然后每种咖啡进行扩展，并且不同的调料也进行实现具体类进行扩展，如图所示：</p>
<p><img src="https://img-blog.csdnimg.cn/20200629105116469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<p>但我们遇到有些问题无法高效解决，出现<strong>类爆炸</strong></p>
<p>1）增删调料种类</p>
<p>2）添加多份问题</p>
<p>原因：新功能的引入就会影响原有代码，即一旦某一种发生变化，跟它相关联的都要改动。</p>
<h3 id="7-3-装饰者模式解决"><a href="#7-3-装饰者模式解决" class="headerlink" title="7.3 装饰者模式解决"></a>7.3 装饰者模式解决</h3><ol>
<li><p>装饰者模式就像打包一个快递</p>
<p>1）主体：陶瓷、衣服</p>
<p>2）包装：报纸填充、塑料泡沫、纸板、木板</p>
</li>
</ol>
<p>本案例就是用 <strong>调料来装饰咖啡</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200629105443604.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<ol start="2">
<li>用装饰者模式设计重新设计的方案</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200629105638475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<ol start="3">
<li>装饰者模式下的订单：例如2份巧克力+一份牛奶的LongBlack，采用递归的方式</li>
</ol>
<p><img src="https://img-blog.csdnimg.cn/20200629105751861.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 超类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String description=<span class="string">""</span>; <span class="comment">// 拓展的子类</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">float</span> price=<span class="number">0f</span>;;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDescription</span><span class="params">(String description)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.description=description;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getPrice</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> price;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">float</span> price)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.price=price;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> description+<span class="string">"-"</span>+<span class="keyword">this</span>.getPrice();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">float</span> <span class="title">cost</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 中间层</span></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.getPrice();</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 子类（咖啡种类）不影响前面的代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Decaf</span> <span class="keyword">extends</span> <span class="title">Coffee</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Decaf</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">super</span>.setDescription(<span class="string">"Decaf"</span>);</span><br><span class="line">		<span class="keyword">super</span>.setPrice(<span class="number">3.0f</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 装饰者分支</span></span><br><span class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">Decorator</span> <span class="keyword">extends</span> <span class="title">Drink</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Drink Obj;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Decorator</span><span class="params">(Drink Obj)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.Obj=Obj;</span><br><span class="line">	&#125;;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">cost</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 价格就是调料价格 + 种类钱</span></span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.getPrice() + Obj.cost();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getDescription</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">super</span>.description+<span class="string">"-"</span>+<span class="keyword">super</span>.getPrice()+<span class="string">"&amp;&amp;"</span>+Obj.getDescription();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体装饰者</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Milk</span> <span class="keyword">extends</span> <span class="title">Decorator</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Milk</span><span class="params">(Drink Obj)</span> </span>&#123;		</span><br><span class="line">		<span class="keyword">super</span>(Obj);</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">		<span class="keyword">super</span>.setDescription(<span class="string">"Milk"</span>);</span><br><span class="line">		<span class="keyword">super</span>.setPrice(<span class="number">2.0f</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 测试用例</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoffeeBar</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Drink order;</span><br><span class="line">		order=<span class="keyword">new</span> Decaf();</span><br><span class="line">		System.out.println(<span class="string">"order1 price:"</span>+order.cost());</span><br><span class="line">		System.out.println(<span class="string">"order1 desc:"</span>+order.getDescription());</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"****************"</span>);</span><br><span class="line">		order=<span class="keyword">new</span> LongBlack();</span><br><span class="line">         <span class="comment">// 多份咖啡——每一种为调料（种类）</span></span><br><span class="line">		order=<span class="keyword">new</span> Milk(order);</span><br><span class="line">		order=<span class="keyword">new</span> Chocolate(order);</span><br><span class="line">		order=<span class="keyword">new</span> Chocolate(order);</span><br><span class="line">         <span class="comment">// 价格进行叠加</span></span><br><span class="line">		System.out.println(<span class="string">"order2 price:"</span>+order.cost());</span><br><span class="line">		System.out.println(<span class="string">"order2 desc:"</span>+order.getDescription());	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-Java中的装饰者"><a href="#7-4-Java中的装饰者" class="headerlink" title="7.4 Java中的装饰者"></a>7.4 Java中的装饰者</h3><p>Java中的I/O实际上就是一个内置的装饰者，它的体系结构：</p>
<p><img src="https://img-blog.csdnimg.cn/20200629113053441.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 自定义一个装饰者（大写装饰者，全部变成大写进行输入）</span></span><br><span class="line"><span class="comment">// 继承FilterInputStream这个中间层</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpperCaseInputStream</span> <span class="keyword">extends</span> <span class="title">FilterInputStream</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="title">UpperCaseInputStream</span><span class="params">(InputStream in)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(in);</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> c=<span class="keyword">super</span>.read();</span><br><span class="line">		<span class="keyword">return</span> c==-<span class="number">1</span>?c:Character.toUpperCase((<span class="keyword">char</span>)(c));</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] b,<span class="keyword">int</span> offset,<span class="keyword">int</span> len)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> result=<span class="keyword">super</span>.read(b,offset,len);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;result;i++) &#123;</span><br><span class="line">			b[i]=(<span class="keyword">byte</span>)Character.toUpperCase((<span class="keyword">char</span>)(b[i]));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InputTest</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> c;</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			InputStream in = <span class="keyword">new</span> UpperCaseInputStream(<span class="keyword">new</span> BufferedInputStream(</span><br><span class="line">					<span class="keyword">new</span> FileInputStream(<span class="string">"F:\\test.txt"</span>)));</span><br><span class="line">			<span class="keyword">while</span>((c=in.read())&gt;=<span class="number">0</span>) &#123;</span><br><span class="line">				System.out.print((<span class="keyword">char</span>)c);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="八、适配器模式"><a href="#八、适配器模式" class="headerlink" title="八、适配器模式"></a>八、适配器模式</h2><h3 id="8-1-定义"><a href="#8-1-定义" class="headerlink" title="8.1 定义"></a>8.1 定义</h3><p><strong>适配器模式：将一个类的接口转换成另一种接口，让原本接口不兼容的类可以兼容</strong></p>
<p>其实在我们平常生活中很常见，都是应用了这种模式。例如转换头，SpringMVC中的HandlerAdapter（处理器适配器）。</p>
<h3 id="8-2-对象适配器和类适配器"><a href="#8-2-对象适配器和类适配器" class="headerlink" title="8.2 对象适配器和类适配器"></a>8.2 对象适配器和类适配器</h3><p>项目示例：火鸡类代替鸭子类给用户，通过<strong>适配器模式</strong>实现</p>
<h4 id="8-2-1-对象适配器（更倾向于使用）"><a href="#8-2-1-对象适配器（更倾向于使用）" class="headerlink" title="8.2.1 对象适配器（更倾向于使用）"></a>8.2.1 对象适配器（更倾向于使用）</h4><p>对象适配器：<strong>调用时需要传入火鸡类（被适配者）</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200619110453314.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/******************************火鸡类******************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WildTurkey</span> <span class="keyword">implements</span> <span class="title">Turkey</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gobble</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">" Go Go"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"I am flying a short distance"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/******************************鸭子类******************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GreenHeadDuck</span> <span class="keyword">implements</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">" Ga Ga"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.println(<span class="string">"I am flying a long distance"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/******************************对象适配器******************************/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurkeyAdapter</span> <span class="keyword">implements</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line">    <span class="comment">//组合方式实现</span></span><br><span class="line">	<span class="keyword">private</span> Turkey turkey;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//调用时需要传入火鸡类（被适配者）</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">TurkeyAdapter</span><span class="params">(Turkey turkey)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.turkey=turkey;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		turkey.gobble();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			turkey.fly();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-2-类适配器"><a href="#8-2-2-类适配器" class="headerlink" title="8.2.2 类适配器"></a>8.2.2 类适配器</h4><p>类适配器：通过<strong>多重继承</strong>（在Java中是继承加实现接口）目标接口 和 被适配者 方式来实现适配</p>
<p><img src="https://img-blog.csdnimg.cn/20200619111304146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TurkeyAdapter2</span> <span class="keyword">extends</span> <span class="title">WildTurkey</span> <span class="keyword">implements</span> <span class="title">Duck</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">quack</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.gobble();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fly</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">super</span>.fly();</span><br><span class="line">		<span class="keyword">super</span>.fly();</span><br><span class="line">		<span class="keyword">super</span>.fly();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-3-差异"><a href="#8-2-3-差异" class="headerlink" title="8.2.3 差异"></a>8.2.3 差异</h4><p>对象适配器和类适配器使用了不同的方法实现适配，对象适配器使用组合，类适配器使用继承。</p>
<p>更倾向于组合适配器，他是<strong>通过组合方式实现，灵活更容易扩展</strong>；而类适配器他是通过多继承（在Java中是继承加实现接口）实现，一旦写成就<strong>无法扩展给子类做适配器</strong>。</p>
<h3 id="8-3-Java中从枚举器到迭代器适配"><a href="#8-3-Java中从枚举器到迭代器适配" class="headerlink" title="8.3 Java中从枚举器到迭代器适配"></a>8.3 Java中从枚举器到迭代器适配</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//适配器的缺点就是可能适配不了被适配者的所有方法</span></span><br><span class="line"><span class="comment">//例如：枚举器中无remove方法，则迭代器中remove就无法实现枚举器的方法，只能自己写</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EnumerationIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">Object</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> Enumeration enumeration;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">EnumerationIterator</span><span class="params">(Enumeration enumeration)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		 <span class="keyword">this</span>.enumeration= enumeration;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> enumeration.hasMoreElements();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">return</span> enumeration.nextElement();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-3-适配器模式优点"><a href="#8-3-适配器模式优点" class="headerlink" title="8.3 适配器模式优点"></a>8.3 适配器模式优点</h3><ul>
<li><p>从用户的角度看不到被适配者，是解耦的</p>
</li>
<li><p>用户调用适配器转化出来的目标接口方法，适配器再调用被适配者的相关接口方法</p>
</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200619105846155.png" alt=""></p>
<ul>
<li>用户收到反馈结果，感觉只是和目标接口（例如鸭子）交互。</li>
</ul>
<h2 id="九、责任链"><a href="#九、责任链" class="headerlink" title="九、责任链"></a>九、责任链</h2><h3 id="9-1-定义"><a href="#9-1-定义" class="headerlink" title="9.1 定义"></a>9.1 定义</h3><p><strong>责任链模式：如果有多个对象都有机会处理请求，责任链可使请求的发送者和接收者解耦，请求沿着责任链传递，直到有一个对象处理了它为止。</strong></p>
<h3 id="9-2-OO设计的不足"><a href="#9-2-OO设计的不足" class="headerlink" title="9.2 OO设计的不足"></a>9.2 OO设计的不足</h3><p>我们先引入一个示例吧：一个请求有多个对象可以处理，但每个对象的处理条件或权限不同。例如，公司员工请求项目，可批假的领导有部门负责人、副总经理、总经理等，但每个领导能批准的金额不同，员工必须根据自己项目的金额去找不同的领导批准，也就是说员工必须记住每个领导的姓名、电话和地址等信息，这增加了难度。这样的例子还有很多，如找领导请假签字等。</p>
<p>用OO模式的设计大概就是，用户根据需求自己选择部门报项目：</p>
<p><img src="https://img-blog.csdnimg.cn/20200624111056705.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<p>这样设计就有问题：</p>
<ul>
<li><p>请求的发送者和接收者耦合度太高，多个对象处理一个这样的请求</p>
</li>
<li><p>对象复杂，因为它必须知道接受者的具体信息进行选择</p>
</li>
<li><p>动态地增加或删减处理请求接受者就很麻烦</p>
</li>
</ul>
<h3 id="9-3-责任链模式解决"><a href="#9-3-责任链模式解决" class="headerlink" title="9.3 责任链模式解决"></a>9.3 责任链模式解决</h3><p>项目的类结构：</p>
<p><img src="https://img-blog.csdnimg.cn/20200624111514903.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" alt=""></p>
<p>责任链模式：如果有多个对象都有机会处理请求，责任链可使请求的发送者和接收者解耦，<strong>请求沿着责任链传递</strong>，直到有一个对象处理了它为止。</p>
<p>适用场合：</p>
<p>• 有多个对象可以处理一个请求</p>
<p>• 不明确接收者的情况</p>
<p>• 有序、无序链，线型、树形、环形链</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抽象的接受者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 后序接受者的指针</span></span><br><span class="line">	 Approver successor;</span><br><span class="line">	 String Name;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Approver</span><span class="params">(String Name)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.Name=Name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">ProcessRequest</span><span class="params">( PurchaseRequest request)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetSuccessor</span><span class="params">(Approver successor)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">this</span>.successor=successor;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 具体的接受者</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GroupApprover</span> <span class="keyword">extends</span> <span class="title">Approver</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">GroupApprover</span><span class="params">(String Name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(Name+<span class="string">" GroupLeader"</span>);</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ProcessRequest</span><span class="params">(PurchaseRequest request)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 请求接受的条件 request.GetSum() &lt; 5000</span></span><br><span class="line">		<span class="keyword">if</span> (request.GetSum() &lt; <span class="number">5000</span>) &#123;</span><br><span class="line">			System.out.println(<span class="string">"**This request "</span> + request.GetID()</span><br><span class="line">					+ <span class="string">" will be handled by "</span></span><br><span class="line">					+ <span class="keyword">this</span>.Name + <span class="string">" **"</span>);</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			successor.ProcessRequest(request);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 用户发起请求</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		Client mClient=<span class="keyword">new</span> Client();</span><br><span class="line">		Approver GroupLeader=<span class="keyword">new</span> GroupApprover(<span class="string">"Tom"</span>);</span><br><span class="line">		Approver DepartmentLeader=<span class="keyword">new</span> DepartmentApprover(<span class="string">"Jerry"</span>);</span><br><span class="line">		Approver VicePresident=<span class="keyword">new</span> VicePresidentApprover(<span class="string">"Kate"</span>);</span><br><span class="line">		Approver President=<span class="keyword">new</span> PresidentApprover(<span class="string">"Bush"</span>);</span><br><span class="line">		</span><br><span class="line">        <span class="comment">// 外部处理链式结构</span></span><br><span class="line">		GroupLeader.SetSuccessor(DepartmentLeader);</span><br><span class="line">		DepartmentLeader.SetSuccessor(VicePresident);</span><br><span class="line">		VicePresident.SetSuccessor(President);</span><br><span class="line">		President.SetSuccessor(GroupLeader);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 发送5000元的请求</span></span><br><span class="line">        PurchaseRequest request = mClient.sendRequst(<span class="number">5000</span>);</span><br><span class="line">        <span class="comment">// 发给责任链的一端进行开始请求传递</span></span><br><span class="line">        GroupLeader.ProcessRequest(request);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-4-优缺点"><a href="#9-4-优缺点" class="headerlink" title="9.4 优缺点"></a>9.4 优缺点</h3><p>优点：<strong>将请求的发送者和接收者解耦</strong>，使多个对象都有机会处理这个请求，对象<strong>它无须知道请求处理链的内部结构</strong>， 可以动态地增加或删减处理请求的链结构。</p>
<p>缺点：请求从链的开头进行遍历，<strong>对性能有一定的损耗</strong>，并不保证请求一定被处理（大于阈值）。</p>
<h2 id="十、建造者"><a href="#十、建造者" class="headerlink" title="十、建造者"></a>十、建造者</h2><h3 id="10-1-定义"><a href="#10-1-定义" class="headerlink" title="10.1 定义"></a>10.1 定义</h3><p><strong>建造者模式：将一个复杂对象的构造与它的表示分离，使同样的构建过程可以创建不同的表示。</strong></p>
<p>与工厂模式的区别：建造者主要是复杂对象的生成，建造者有多个实现类，而工厂主要是生产一些简单的对象。</p>
<p>指挥者（Director）：用户是通过指挥者来生成，在指挥者中不涉及具体产品的信息。<strong>指挥者调用建造者对象中的部件构造与装配方法完成复杂对象的创建。</strong></p>
<p><img src="http://c.biancheng.net/uploads/allimg/181114/3-1Q1141H441X4.gif" alt="建造者模式的结构图"></p>
<h3 id="10-2-建造者模式解决"><a href="#10-2-建造者模式解决" class="headerlink" title="10.2 建造者模式解决"></a>10.2 建造者模式解决</h3><p>我们拿制作度假计划为案例来展开：</p>
<p>用户是通过指挥者来生成度假计划，指挥者调用建造者对象中的部件构造与装配方法完成复杂对象的创建</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 指挥者 </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Director</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> AbsBuilder builder;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">// builder是个抽象类，传入时再传入具体的实现类</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Director</span><span class="params">(AbsBuilder builder)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.builder=builder;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setBuilder</span><span class="params">(AbsBuilder builder)</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.builder=builder;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		builder.buildvacation();</span><br><span class="line">		builder.getVacation().showInfo();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// vecation复杂对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Vacation</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> ArrayList&lt;VacationDay&gt; mVacationDayLst;</span><br><span class="line">	<span class="keyword">private</span> Date mStDate;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mDays = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> VacationDay mVacationDay;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Vacation</span><span class="params">(String std)</span> </span>&#123;</span><br><span class="line">		mVacationDayLst = <span class="keyword">new</span> ArrayList&lt;VacationDay&gt;();</span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			mStDate = sdf.parse(std);</span><br><span class="line">			mVacationDay = <span class="keyword">new</span> VacationDay(mStDate);</span><br><span class="line">			mVacationDayLst.add(mVacationDay);</span><br><span class="line">			mDays++;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStDate</span><span class="params">(String std)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			mStDate = sdf.parse(std);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (ParseException e) &#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated catch block</span></span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Date <span class="title">getStDate</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> mStDate;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		mVacationDay = <span class="keyword">new</span> VacationDay(nextDate(mDays));</span><br><span class="line">		mVacationDayLst.add(mVacationDay);</span><br><span class="line">		mDays++;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">setVacationDay</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ((i &gt; <span class="number">0</span>) &amp;&amp; (i &lt; mVacationDayLst.size())) &#123;</span><br><span class="line">			mVacationDay = mVacationDayLst.get(i);</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		mVacationDay = <span class="keyword">null</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setHotel</span><span class="params">(String mHotels)</span> </span>&#123;</span><br><span class="line">		mVacationDay.setHotel(mHotels);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTicket</span><span class="params">(String ticket)</span> </span>&#123;</span><br><span class="line">		mVacationDay.addTicket(ticket);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addEvent</span><span class="params">(String event)</span> </span>&#123;</span><br><span class="line">		mVacationDay.addEvent(event);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = mVacationDayLst.size(); i &lt; len; i++) &#123;</span><br><span class="line">			System.out.println(<span class="string">"** "</span> + (i + <span class="number">1</span>) + <span class="string">" day**"</span>);</span><br><span class="line">			System.out.println(mVacationDayLst.get(i).showInfo());</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> Date <span class="title">nextDate</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">		Calendar cal = Calendar.getInstance();</span><br><span class="line">		cal.setTime(mStDate);</span><br><span class="line">		cal.add(Calendar.DATE, n);</span><br><span class="line">		<span class="keyword">return</span> cal.getTime();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="建造者创建复杂对象"><a href="#建造者创建复杂对象" class="headerlink" title="建造者创建复杂对象"></a>建造者创建复杂对象</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 抽象建造者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbsBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> Vacation mVacation;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">AbsBuilder</span><span class="params">(String std)</span> </span>&#123;</span><br><span class="line">		mVacation = <span class="keyword">new</span> Vacation(std);</span><br><span class="line">	&#125;</span><br><span class="line">    ......</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Vacation <span class="title">getVacation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mVacation;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以三天度假方案建造者为例子</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder3d</span> <span class="keyword">extends</span> <span class="title">AbsBuilder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Builder3d</span><span class="params">(String std)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 生成度假对象</span></span><br><span class="line">		<span class="keyword">super</span>(std);</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildDay</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		mVacation.setVacationDay(i);</span><br><span class="line">	&#125;</span><br><span class="line">	......</span><br><span class="line">    </span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">buildvacation</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		addTicket(<span class="string">"Plane Ticket"</span>);</span><br><span class="line">		addEvent(<span class="string">"Fly to Destination"</span>);</span><br><span class="line">		addEvent(<span class="string">"Supper"</span>);</span><br><span class="line">		addEvent(<span class="string">"Dancing"</span>);</span><br><span class="line">		addHotel(<span class="string">"Four Seasons"</span>);</span><br><span class="line"></span><br><span class="line">		mVacation.addDay();</span><br><span class="line">		addTicket(<span class="string">"Theme Park"</span>);</span><br><span class="line">		addEvent(<span class="string">"Bus to Park"</span>);</span><br><span class="line">		addEvent(<span class="string">"lunch"</span>);</span><br><span class="line">		addHotel(<span class="string">"Four Seasons"</span>);</span><br><span class="line"></span><br><span class="line">		mVacation.addDay();</span><br><span class="line"></span><br><span class="line">		addTicket(<span class="string">"Plane Ticket"</span>);</span><br><span class="line">		addEvent(<span class="string">"City Tour"</span>);</span><br><span class="line">		addEvent(<span class="string">"Fly to Home"</span>);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="用户操作"><a href="#用户操作" class="headerlink" title="用户操作"></a>用户操作</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Director mDirector = <span class="keyword">new</span> Director(<span class="keyword">new</span> Builder4d(<span class="string">"2015-12-29"</span>));</span><br><span class="line">mDirector.construct();</span><br><span class="line"></span><br><span class="line">mDirector.setBuilder(<span class="keyword">new</span> Builder3d(<span class="string">"2015-8-30"</span>));</span><br><span class="line">mDirector.construct();</span><br></pre></td></tr></table></figure>

<h3 id="10-3-省略指挥者和抽象生成器类"><a href="#10-3-省略指挥者和抽象生成器类" class="headerlink" title="10.3 省略指挥者和抽象生成器类"></a>10.3 省略指挥者和抽象生成器类</h3><p>有时候功能没有那么复杂，具体的builder比较少和对象也只有一种，而且用户也可以定制化建造者。</p>
<p>例如StringBuilder。</p>
<p><code>return this;</code>返回建造对象，是可以连续进行操作。</p>
<p>例如：<code>builder.addTicket(&quot;Plane Ticket&quot;).addEvent(&quot;Fly to Destination&quot;).addEvent(&quot;Supper&quot;).addHotel(&quot;Hilton&quot;);</code></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 省略抽象生成器类直接生成</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BuilderSelf</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> Vacation mVacation;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">BuilderSelf</span><span class="params">(String std)</span> </span>&#123;</span><br><span class="line">		mVacation = <span class="keyword">new</span> Vacation(std);</span><br><span class="line">		<span class="comment">// TODO Auto-generated constructor stub</span></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> BuilderSelf <span class="title">addDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">		mVacation.addDay();</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> BuilderSelf <span class="title">buildDay</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line"></span><br><span class="line">		mVacation.setVacationDay(i);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> BuilderSelf <span class="title">addHotel</span><span class="params">(String hotel)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		mVacation.setHotel(hotel);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> BuilderSelf <span class="title">addTicket</span><span class="params">(String ticket)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		mVacation.addTicket(ticket);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> BuilderSelf <span class="title">addEvent</span><span class="params">(String event)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		mVacation.addEvent(event);</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Vacation <span class="title">getVacation</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> mVacation;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用户自己直接调用builder来实现功能</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">testself</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		BuilderSelf builder = <span class="keyword">new</span> BuilderSelf(<span class="string">"2015-9-29"</span>);</span><br><span class="line"></span><br><span class="line">		builder.addTicket(<span class="string">"Plane Ticket"</span>).addEvent(<span class="string">"Fly to Destination"</span>)</span><br><span class="line">				.addEvent(<span class="string">"Supper"</span>).addHotel(<span class="string">"Hilton"</span>);</span><br><span class="line"></span><br><span class="line">		builder.addDay().addTicket(<span class="string">"Zoo Ticket"</span>).addEvent(<span class="string">"Bus to Zoo"</span>)</span><br><span class="line">				.addEvent(<span class="string">"Feed animals"</span>).addHotel(<span class="string">"Home Inn"</span>);</span><br><span class="line"></span><br><span class="line">		builder.addDay();</span><br><span class="line">		builder.addTicket(<span class="string">"Beach"</span>);</span><br><span class="line">		builder.addEvent(<span class="string">"Swimming"</span>);</span><br><span class="line">		builder.addHotel(<span class="string">"Home inn"</span>);</span><br><span class="line"></span><br><span class="line">		builder.addDay().addTicket(<span class="string">"Plane Ticket"</span>).addEvent(<span class="string">"Fly to Home"</span>);</span><br><span class="line">		builder.getVacation().showInfo();</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">rnang0</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/06/15/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A03%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">http://yoursite.com/2020/06/15/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A03%EF%BC%9A%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">rnang0 Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a></div><div class="post_share"><div class="social-share" data-image="https://img-blog.csdnimg.cn/20200624114032370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/23/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A04%EF%BC%9A%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><img class="prev_cover" src="https://img-blog.csdnimg.cn/20200624114032370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjA1MDg1,size_16,color_FFFFFF,t_70" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">春招复习4：操作系统</div></div></a></div><div class="next-post pull_right"><a href="/2020/06/11/%E6%98%A5%E6%8B%9B%E5%A4%8D%E4%B9%A02%EF%BC%9AJava%E9%9B%86%E5%90%88%E7%B1%BB%EF%BC%88%E4%B8%8B%EF%BC%89/"><img class="next_cover" src="https://img-blog.csdnimg.cn/20191126222904576.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NvdWdvdV8xMzIz,size_16,color_FFFFFF,t_70" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">春招复习2：Java集合类（下）</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By rnang0</div><div class="footer_custom_text">Hi, welcome to my <a href="http://rnang0.github.io/" target="_blank" rel="noopener">blog</a>!</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script></body></html>